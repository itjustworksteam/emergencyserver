os:
- linux
language: generic
sudo: required
dist: trusty
services:
- docker
install:
- eval "$(curl -sL https://gist.githubusercontent.com/kylef/5c0475ff02b7c7671d2a/raw/02090c7ede5a637b76e6df1710e83cd0bbe7dcdf/swiftenv-install.sh)"
script:
- if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then swiftenv install 3.0 ; fi
- swiftenv global 3.0
- swift build -Xswiftc -I/usr/local/mysql/include -Xlinker -L/usr/local/mysql/lib
  -Xswiftc -DNOJSON
- swift test -Xswiftc -I/usr/local/mysql/include -Xlinker -L/usr/local/mysql/lib -Xswiftc
  -DNOJSON
- docker build -t therickys93/emergencyserver .
after_success:
- if [ "$TRAVIS_BRANCH" == "master" ] && [ "$TRAVIS_PULL_REQUEST" == "false" ]; then
  docker login -e="$DOCKER_EMAIL" -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD"; docker
  push therickys93/emergencyserver; fi
deploy:
  provider: heroku
  app: emergency-server
  api_key:
    secure: qrBm09t8qbuaNtKBXDaiShPNwwA/f1ultNqwoeOlUo+E7KON8qeLbSbn8xxF+HMxF3ynnCx2irnxjEA0zUL+uX7oqacUaBtM9NFCInRP8mriIqSPe1lM+U1sOkVzQne9EV2qEtmsBLJ9jbO787vIulUe8/zzOn7loro3g3RARVFq4zdaIA+n6ehGuWzBi1ax1drBASfiHG4vreRqEle7KEJabx5P4s77pywqPZ0TTqQk0FX3JbpfAjriWQ3YSOzxeFNyPQIHK3DVmILOp1w/udNgQ+xNt8V/4kO1/1m2MFK0wO4/Os5O87xHY4XwnrXXkruAACYn3O40+G72Lk7pKze5UbgBFaj6jJXTMDfnF6BS3aLB+DQdkh3O57m2QCxRveU2il6LrXysiaJ2nHJ7s3T8ujwscisbN4oU3EltPsm1nhYht/6TPz4sLTTgB35lcjg4TlLBjs3bxQaK65OFCyvN0F/kFwzvwRA34ywmyOjwRazlleiQ3azN/6obkGQSIuPPr6cRzPtkE8OHxLa9HTelcYPIUlBg0mr7FtM2p/Kr3ZT/U1vpe58IY4YBC0F/dCUYc4pNuuiDrl70iwVmaYobkvYMqQSlFxwG8SgVv3NwVDr9LEYKA70kznfR72WqahhSUJFEQTWRyFNyqZcC4gmDZ6qWHUmUCAIWlzoCPaY=
